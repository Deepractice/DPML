# DPML架构规则索引

本文档索引了DPML类库架构的所有强制规则文档和术语表。请根据需求查阅相关内容。

## 注意力路由表 (AttentionRouter)

根据当前任务类型，请以不同注意力等级关注相应章节：

- **忽略** - 当前任务可以不关注此内容
- **略知** - 大致了解即可，不需深入
- **了解** - 需要理解主要内容和原则
- **熟知** - 需要全面掌握内容和细节
- **谨记** - 必须牢记并严格遵守的核心规则

## 注意力分配矩阵

| 文档 | 模块需求分析 | 模块骨架设计 | 模块测试用例设计 | 模块骨架开发 | 模块测试开发 | 模块实现开发 | 模块实现开发OES任务设计 |
|---------|------------|------------|--------------|------------|------------|------------|------------------|
| [架构术语表](terminology.md) | **谨记** | **谨记** | **谨记** | **谨记** | **谨记** | **谨记** | **谨记** |
| [API层设计规则](api-layer.md) | **谨记** | **谨记** | **略知** | **谨记** | **略知** | **了解** | **略知** |
| [Types层设计规则](types-layer.md) | **谨记** | **谨记** | **了解** | **谨记** | **了解** | **熟知** | **略知** |
| [Core层设计规则](core-layer.md) | **熟知** | **谨记** | **了解** | **谨记** | **了解** | **谨记** | **熟知** |
| [架构概览规则](architecture-overview.md) | **谨记** | **谨记** | **熟知** | **熟知** | **了解** | **熟知** | **熟知** |
| [测试策略规则](testing-strategy.md) | **了解** | **了解** | **谨记** | **了解** | **谨记** | **熟知** | **了解** |
| [测试用例设计规则](test-case-design.md) | **了解** | **了解** | **谨记** | **略知** | **谨记** | **了解** | **略知** |
| [UML图表表示规则](uml-representation.md) | **略知** | **谨记** | **了解** | **熟知** | **略知** | **了解** | **了解** |
| [OES任务设计规则](oes-task-design.md) | **了解** | **熟知** | **熟知** | **了解** | **了解** | **熟知** | **谨记** |

## 模块开发工作流

DPML模块的开发遵循以下固定工作流程，确保模块设计与实现的高质量与一致性：

1. **模块需求分析**
   - 输出：模块需求文档
   - 重点：API使用思路和场景
   - 关注：用户如何调用API，API提供哪些功能

2. **模块骨架设计**
   - 输出：模块级完整UML图和序列图
   - 重点：模块内部组件划分与交互关系
   - 关注：组件职责划分，数据流向，依赖关系

3. **模块测试用例设计**
   - 输出：测试用例文档
   - 重点：基于模块骨架设计测试策略
   - 关注：功能覆盖，边界条件，异常情况

4. **模块骨架开发**
   - 输出：模块基础代码框架
   - 重点：根据UML和序列图实现骨架代码
   - 关注：接口定义，组件结构，依赖注入

5. **模块测试开发**
   - 输出：测试代码
   - 重点：实现测试用例文档中的测试
   - 关注：测试覆盖率，测试隔离性

6. **模块实现开发OES任务设计**
   - 输出：OES任务文档
   - 重点：为模块实现细节设计具体任务
   - 关注：任务颗粒度，依赖关系，成功标准

7. **模块实现开发**
   - 输出：完整功能模块
   - 重点：按OES任务步骤完成所有实现
   - 关注：功能完整性，代码质量，测试通过

各阶段应严格按照架构规则进行，参考注意力分配矩阵关注相应文档。

## 文档概述

### [架构术语表](terminology.md)

定义了DPML类库架构中使用的核心术语，包括：
- 架构层级术语 (API层、Types层、Core层、Test层)
- 模块层级术语 (模块、模块服务)
- 组件类别术语 (协调组件、执行组件、状态管理组件、创建组件)
- 设计原则术语 (函数式API、不可变原则、API委托原则等)
- 组件关系术语 (委托、协调、依赖、状态共享)
- 代码组织术语 (文件类型、接口类型、类类型、函数类型等)
- 命名风格术语 (命名法、前后缀、语义命名)
- 目录结构术语
- 图表表示术语

### [API层设计规则](api-layer.md)

定义了API层的设计规则，包括：
- 目录与文件组织规则
- 命名约定规则
- 函数设计原则规则
- API组织方式规则
- 错误处理规范规则
- 文档规范规则
- 渐进式API暴露规则
- API委托原则规则

### [Types层设计规则](types-layer.md)

定义了Types层的设计规则，包括：
- 目录与文件组织规则
- 命名约定规则
- 类型设计原则规则
- 类型组织原则规则
- 接口与类型别名使用规则
- 文档规范规则
- 内部类型与对外类型的区分规则
- 类型安全设计规则

### [Core层设计规则](core-layer.md)

定义了Core层的设计规则，包括：
- 目录与文件组织规则
- 模块服务设计规则
- 业务类设计规则
- 内部服务类设计规则
- 工厂模式设计规则
- 命名约定规则
- 不可变原则规则
- 文档规范规则

### [架构概览规则](architecture-overview.md)

定义了DPML类库整体架构规则，包括：
- 架构分层规则
- 数据流规则
- 组件关系规则
- 错误处理架构规则

### [测试策略规则](testing-strategy.md)

定义了DPML类库测试策略规则，包括：
- 分层测试策略规则
- 测试侧重点规则
- 测试实践规则
- 组件测试策略规则
- 测试组织规则
- 测试不足的处理规则

### [测试用例设计规则](test-case-design.md)

定义了DPML类库测试用例设计的规则，包括：
- 测试用例文档组织规则
- 测试用例表格设计规则
- 测试覆盖范围规则
- 正反面测试平衡规则
- 模拟(Mock)策略规则
- 测试夹具设计规则
- 测试用例设计最佳实践
- 测试用例评审规则

### [UML图表表示规则](uml-representation.md)

定义了DPML类库架构UML图表表示的规则，包括：
- 图表基本原则规则
- 组件表示规则
- 跨层级UML图设计规则
- 序列图表示规则
- 与代码映射关系规则
- 工具规范规则
- 实例参考规则

### [OES任务设计规则](oes-task-design.md)

定义了使用OES框架设计开发任务的规则，包括：
- 目标-环境-成功标准框架定义
- 任务设计规则和模板
- 基于TDD的任务设计特点
- 任务分解和依赖表示规则
- 任务设计最佳实践
- 任务示例和应用场景

## 规则使用指南

1. **术语理解**：首先熟悉[架构术语表](terminology.md)中的术语，确保理解项目中使用的专业术语。
2. **新功能开发**：了解[架构概览规则](architecture-overview.md)，然后根据开发的层级查阅相应的设计规则。
3. **API设计**：开发公共API时，严格遵循[API层设计规则](api-layer.md)和[Types层设计规则](types-layer.md)。
4. **内部实现**：实现核心功能时，严格遵循[Core层设计规则](core-layer.md)，并参考[架构概览规则](architecture-overview.md)中的组件关系矩阵。
5. **重构任务**：重构代码时，全面掌握所有规则，特别是[架构概览规则](architecture-overview.md)中的组件交互规则。
6. **测试编写**：编写测试时，遵循[测试策略规则](testing-strategy.md)，根据组件类型选择合适的测试策略；设计测试用例时，遵循[测试用例设计规则](test-case-design.md)。
7. **架构文档**：编写架构文档和UML图时，遵循[UML图表表示规则](uml-representation.md)，确保图表清晰、准确地反映代码结构。
8. **任务设计**：设计开发任务时，遵循[OES任务设计规则](oes-task-design.md)，确保任务定义清晰、环境完备、成功标准明确。 